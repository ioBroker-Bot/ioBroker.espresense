{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.5.0\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from '@iobroker/adapter-core';\nimport { Library } from './lib/library.js';\nimport { MQTTClientClass, MQTTServerClass } from './lib/mqtt.js';\nimport { genericStateObjects, statesObjects } from './lib/definition.js';\nimport 'source-map-support/register';\n\n// Load your modules here, e.g.:\n// import * as fs from \"fs\";\n\nexport class Espresense extends utils.Adapter {\n    library: Library;\n    mqttClient: MQTTClientClass | undefined;\n    mqttServer: MQTTServerClass | undefined;\n    namedDevices: { [key: string]: string } = {};\n    timeout: ioBroker.Interval | undefined = undefined;\n    startDelay: ioBroker.Timeout | undefined = undefined;\n    unseenCheckTime: number = 5000;\n    deviceDB: { [id: string]: { name: string; lc: number } } = {};\n    public constructor(options: Partial<utils.AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: 'espresense',\n        });\n        this.library = new Library(this);\n        this.on('ready', this.onReady.bind(this));\n        this.on('stateChange', this.onStateChange.bind(this));\n        this.on('message', this.onMessage.bind(this));\n        this.on('unload', this.onUnload.bind(this));\n    }\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        // Reset the connection indicator during startup\n        this.setStateAsync('info.connection', false, true);\n        this.startDelay = this.setTimeout(async () => {\n            await this.library.init();\n            await this.library.initStates(await this.getStatesAsync('*'));\n            this.library.defaults.updateStateOnChangeOnly = false;\n\n            this.library.writedp('devices', undefined, genericStateObjects.devices);\n            this.library.writedp('rooms', undefined, genericStateObjects.rooms);\n            this.library.writedp('settings', undefined, genericStateObjects.settings);\n\n            const temp = this.library.readdp('deviceDB');\n            if (temp && temp.val && typeof temp.val == 'string') {\n                this.deviceDB = JSON.parse(temp.val);\n            }\n\n            await this.subscribeStatesAsync('rooms.*');\n            this.namedDevices = {};\n            //check config\n            let testIt: any = this.config.MQTTServerIp;\n            if (testIt == '' || typeof testIt != 'string') {\n                this.log.warn(`Invalid configuration mqtt server ip has unexpeted value: ${testIt}`);\n                return;\n            }\n            testIt = this.config.MQTTServerPort;\n            if (typeof testIt != 'number' || testIt <= 1023) {\n                this.log.warn(`Invalid configuration mqtt server port has unexpeted value: ${testIt}`);\n                return;\n            }\n            testIt = this.config.MQTTPassword;\n            if (typeof testIt != 'string') {\n                this.log.error(`Invalid configuration mqtt server password has unexpeted value type ${typeof testIt}`);\n                return;\n            }\n            testIt = this.config.MQTTUsername;\n            if (typeof testIt != 'string') {\n                this.log.error(`Invalid configuration mqtt username has unexpeted value typ: ${typeof testIt}`);\n                return;\n            }\n            testIt = this.config.unseenTime;\n            if (isNaN(testIt) || testIt == '' || testIt < 5) {\n                this.config.unseenTime = 20;\n            }\n            testIt = this.config.selectedDevices;\n            if (typeof testIt != 'object' || !Array.isArray(testIt)) {\n                this.config.selectedDevices = [];\n            }\n            this.config.unseenTime *= 1000;\n            // configuration ok\n            if (this.config.MQTTUseServer) {\n                this.mqttServer = new MQTTServerClass(\n                    this,\n                    this.config.MQTTServerPort,\n                    this.config.MQTTUsername,\n                    this.config.MQTTPassword,\n                );\n            }\n            this.mqttClient = new MQTTClientClass(\n                this,\n                this.config.MQTTUseServer ? '127.0.0.1' : this.config.MQTTServerIp,\n                this.config.MQTTServerPort,\n                this.config.MQTTUsername,\n                this.config.MQTTPassword,\n            );\n            this.timeout = this.setInterval(() => {\n                this.library.garbageColleting('devices.', this.config.unseenTime);\n            }, this.unseenCheckTime);\n            if ((this.config.selectedDevices || []).length > 0) {\n                await this.library.cleanUpTree(\n                    this.config.selectedDevices.map((a) => `devices.${a.id}`),\n                    [`devices.`],\n                    -1,\n                );\n            }\n        }, 1000);\n    }\n\n    async handleMessage(topic: string, message: any): Promise<void> {\n        if (!topic || message == undefined) return;\n        const topicA = topic.split('/');\n        topicA.shift();\n        const typTemp = topicA.shift();\n        if (typTemp !== 'rooms' && typTemp !== 'settings' && typTemp !== 'devices') return;\n        const typ: 'settings' | 'devices' | 'rooms' = typTemp;\n        const temp = this.library.cloneGenericObject(statesObjects[typ]._channel) as ioBroker.DeviceObject;\n\n        let device = topicA.shift();\n        device = device ? device : 'no_name';\n        if (message && message.name && message.id) {\n            this.namedDevices[message.id] = message.name;\n        }\n        temp.common.name = this.namedDevices[device] || device;\n        if (typ === 'settings' && message.name) temp.common.name = message.name;\n        if (typ === 'devices') {\n            this.deviceDB[device] = { name: this.namedDevices[device] || device, lc: Date.now() };\n            this.library.writedp('deviceDB', JSON.stringify(this.deviceDB), genericStateObjects.deviceDB);\n            if (this.config.selectedDevices.length > 0) {\n                if (\n                    this.config.selectedDevices.findIndex((i) => {\n                        return i.id === device;\n                    }) == -1\n                )\n                    return;\n            }\n        }\n        await this.library.writedp(`${typ}.${device}`, undefined, temp);\n\n        if (typ === 'rooms') {\n            // ignore set commands\n            if (topicA[topicA.length - 1] == 'set') return;\n\n            const data: any = {};\n            data[topicA.join('.')] = message;\n            try {\n                await this.library.writeFromJson(`${typ}.${device}`, typ, statesObjects, data);\n            } catch (e: any) {\n                this.log.error(e);\n                this.log.error(`Topic:${topic} data: ${JSON.stringify(data)}`);\n            }\n        } else if (typ === 'settings') {\n            const data: any = {};\n            this.namedDevices[message.id] = message.name;\n\n            data[topicA.join('.')] = message;\n            await this.library.writeFromJson(`${typ}.${device}`, typ, statesObjects, data);\n        } else if (typ === 'devices') {\n            let subDevice = topicA.shift();\n            subDevice = subDevice ? subDevice : 'no_name';\n            const temp = this.library.cloneGenericObject(statesObjects[typ]._channel) as ioBroker.DeviceObject;\n            temp.common.name = this.namedDevices[subDevice] || subDevice;\n            await this.library.writedp(`${typ}.${device}.${subDevice}`, undefined, temp);\n            await this.library.writedp(`${typ}.${device}.presense`, true, genericStateObjects.presense);\n            await this.library.writeFromJson(`${typ}.${device}.${subDevice}`, typ, statesObjects, message);\n        }\n    }\n    /**\n     * Is called when adapter shuts down - callback has to be called under any circumstances!\n     */\n    private onUnload(callback: () => void): void {\n        try {\n            if (this.mqttClient) this.mqttClient.destroy();\n            if (this.mqttServer) this.mqttServer.destroy();\n            if (this.timeout) this.clearInterval(this.timeout);\n            if (this.startDelay) this.clearTimeout(this.startDelay);\n            callback();\n        } catch (e) {\n            callback();\n        }\n    }\n\n    // If you need to react to object changes, uncomment the following block and the corresponding line in the constructor.\n    // You also need to subscribe to the objects with `this.subscribeObjects`, similar to `this.subscribeStates`.\n    // /**\n    //  * Is called if a subscribed object changes\n    //  */\n    // private onObjectChange(id: string, obj: ioBroker.Object | null | undefined): void {\n    //     if (obj) {\n    //         // The object was changed\n    //         this.log.info(`object ${id} changed: ${JSON.stringify(obj)}`);\n    //     } else {\n    //         // The object was deleted\n    //         this.log.info(`object ${id} deleted`);\n    //     }\n    // }\n\n    /**\n     * Is called if a subscribed state changes\n     */\n    private async onStateChange(id: string, state: ioBroker.State | null | undefined): Promise<void> {\n        if (state && !state.ack) {\n            id = id.replace(`${this.namespace}.`, '');\n            this.library.setdb(id, 'state', state.val, undefined, state.ack, state.ts);\n            const dbEntry = this.library.readdp(id);\n            if (dbEntry && dbEntry.obj && dbEntry.obj.common && dbEntry.obj.common.write) {\n                const native = dbEntry.obj.native;\n                let val = dbEntry.val;\n                if (native && native.convert) {\n                    const fn = new Function('val', `return ${native.convert}`);\n                    val = fn(val);\n                }\n                const topic = `espresense/${id.split('.').join('/')}/set`;\n                if (this.mqttClient) await this.mqttClient.publish(topic, String(val));\n            }\n        } else {\n        }\n    }\n\n    //If you need to accept messages in your adapter, uncomment the following block and the corresponding line in the constructor.\n    /**\n     * Some message was sent to this instance over message box. Used by email, pushover, text2speech, ...\n     * Using this method requires \"common.messagebox\" property to be set to true in io-package.json\n     */\n    private onMessage(obj: ioBroker.Message): void {\n        if (typeof obj === 'object' && obj.message) {\n            switch (obj.command) {\n                case 'getDevices':\n                    {\n                        let result: { label: string; value: string }[] = [];\n                        for (const id in this.config.selectedDevices) {\n                            result.push({\n                                label: this.config.selectedDevices[id].name,\n                                value: this.config.selectedDevices[id].id,\n                            });\n                        }\n                        for (const id in this.deviceDB) {\n                            const data = this.deviceDB[id];\n                            if (data.lc < Date.now() - 300000) {\n                                delete this.deviceDB[id];\n                                continue;\n                            } else {\n                                result.push({ label: data.name, value: id });\n                            }\n                        }\n                        result = result.filter(\n                            (a, b) =>\n                                result.findIndex((c) => {\n                                    return c.value == a.value;\n                                }) == b,\n                        );\n                        this.library.writedp('deviceDB', JSON.stringify(this.deviceDB), genericStateObjects.deviceDB);\n                        if (obj.callback) this.sendTo(obj.from, obj.command, result, obj.callback);\n                    }\n                    break;\n                case 'addDevice':\n                    {\n                        if (\n                            this.config.selectedDevices.findIndex((i) => {\n                                return i.id == obj.message.id;\n                            }) == -1\n                        ) {\n                            this.config.selectedDevices.push({\n                                id: obj.message.id,\n                                name:\n                                    (this.deviceDB[obj.message.id] && this.deviceDB[obj.message.id].name) ||\n                                    obj.message.id,\n                            });\n                        }\n                        if (obj.callback)\n                            this.sendTo(\n                                obj.from,\n                                obj.command,\n                                { native: { selectedDevices: this.config.selectedDevices } },\n                                obj.callback,\n                            );\n                    }\n                    break;\n                case 'removeDevice':\n                    {\n                        if (\n                            this.config.selectedDevices.findIndex((i) => {\n                                i.id == obj.message.id;\n                            }) != -1\n                        ) {\n                            this.config.selectedDevices.splice(\n                                this.config.selectedDevices.findIndex((i) => {\n                                    i.id == obj.message.id;\n                                }),\n                                1,\n                            );\n                        }\n                        if (obj.callback)\n                            this.sendTo(\n                                obj.from,\n                                obj.command,\n                                { native: { selectedDevices: this.config.selectedDevices } },\n                                obj.callback,\n                            );\n                    }\n                    break;\n            }\n            if (obj.command === 'send') {\n                // e.g. send email or pushover or whatever\n                this.log.info('send command');\n\n                // Send response in callback if required\n                if (obj.callback) this.sendTo(obj.from, obj.command, 'Message received', obj.callback);\n            }\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Espresense(options);\n} else {\n    // otherwise start the instance directly\n    (() => new Espresense())();\n}\n"],
  "mappings": "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",
  "names": ["temp"]
}
